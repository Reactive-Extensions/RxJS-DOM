/*
 Copyright (c) Microsoft Corporation.  All rights reserved.
 This code is licensed by Microsoft Corporation under the terms
 of the MICROSOFT REACTIVE EXTENSIONS FOR JAVASCRIPT AND .NET LIBRARIES License.
 See http://go.microsoft.com/fwlink/?LinkID=220762.
*/
(function(s,t){var f;f="undefined"!==typeof exports?require("./rx.min.js"):s.Rx;var m=f.Observable,d=m.prototype,l=m.createWithDisposable,u=f.CompositeDisposable,n=function(a,b){return a===b},o=function(a){return a},p=function(a,b){return a>b?1:a===b?0:-1},q=function(a,b,e){return l(function(c){var d=!1,g=null,h=[];return a.subscribe(function(a){var i,j;try{j=b(a)}catch(v){c.onError(v);return}i=0;if(d)try{i=e(j,g)}catch(w){c.onError(w);return}else d=!0,g=j;0<i&&(g=j,h=[]);0<=i&&h.push(a)},function(a){c.onError(a)},
function(){c.onNext(h);c.onCompleted()})})};d.aggregate=function(){var a,b,e;2===arguments.length?(a=arguments[0],b=!0,e=arguments[1]):e=arguments[0];return b?this.scan(a,e).startWith(a).finalValue():this.scan(e).finalValue()};d.any=function(a){var b=this;return a!==t?b.where(a).any():l(function(a){return b.subscribe(function(){a.onNext(!0);a.onCompleted()},function(b){a.onError(b)},function(){a.onNext(!1);a.onCompleted()})})};d.isEmpty=function(){return this.any().select(function(a){return!a})};
d.all=function(a){return this.where(function(b){return!a(b)}).any().select(function(a){return!a})};d.contains=function(a,b){b||(b=n);return this.where(function(d){return b(d,a)}).any()};d.count=function(){return this.aggregate(0,function(a){return a+1})};d.sum=function(){return this.aggregate(0,function(a,b){return a+b})};d.minBy=function(a,b){b||(b=p);return q(this,a,function(a,c){return-1*b(a,c)})};var r=function(a){if(0==a.length)throw Error("Sequence contains no elements.");return a[0]};d.min=
function(a){return this.minBy(o,a).select(function(a){return r(a)})};d.maxBy=function(a,b){b||(b=p);return q(this,a,b)};d.max=function(a){return this.maxBy(o,a).select(function(a){return r(a)})};d.average=function(){return this.scan({sum:0,count:0},function(a,b){return{sum:a.sum+b,count:a.count+1}}).finalValue().select(function(a){return a.sum/a.count})};d.sequenceEqual=function(a,b){var d=this;b||(b=n);return l(function(c){var f=!1,g=!1,h=[],k=[],i=d.subscribe(function(a){var d,f;if(0<k.length){f=
k.shift();try{d=b(f,a)}catch(e){c.onError(e);return}d||(c.onNext(!1),c.onCompleted())}else g?(c.onNext(!1),c.onCompleted()):h.push(a)},function(a){c.onError(a)},function(){f=!0;0===h.length&&(0<k.length?(c.onNext(!1),c.onCompleted()):g&&(c.onNext(!0),c.onCompleted()))}),j=a.subscribe(function(a){var d,e;if(0<h.length){e=h.shift();try{d=b(e,a)}catch(g){c.onError(g);return}d||(c.onNext(!1),c.onCompleted())}else f?(c.onNext(!1),c.onCompleted()):k.push(a)},function(a){c.onError(a)},function(){g=!0;0===
k.length&&(0<h.length?(c.onNext(!1),c.onCompleted()):f&&(c.onNext(!0),c.onCompleted()))});return new u(i,j)})}})(this);